{"version":3,"file":"app~e4317507.bundle.js","mappings":"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","sources":["webpack://restaurant-apps/./src/scripts/routes/routes.js","webpack://restaurant-apps/./src/scripts/routes/url-parser.js","webpack://restaurant-apps/./src/scripts/utils/drawer-init.js","webpack://restaurant-apps/./src/scripts/utils/favorite-init.js","webpack://restaurant-apps/./src/scripts/utils/review-post-init.js","webpack://restaurant-apps/./src/scripts/utils/sw-register.js"],"sourcesContent":["import RestaurantNow from '../views/restaurant';\nimport RestaurantDetail from '../views/detail';\nimport RestaurantFavorite from '../views/favorite';\n\nconst routes = {\n  '/': RestaurantNow,\n  '/restaurants': RestaurantNow,\n  '/detail/:id': RestaurantDetail,\n  '/favorites': RestaurantFavorite,\n};\n\nexport default routes;\n","const UrlParser = {\n  parseActiveUrlWithCombiner() {\n    const url = window.location.hash.slice(1).toLowerCase();\n    const splitedUrl = this._urlSplitter(url);\n    return this._urlCombiner(splitedUrl);\n  },\n\n  parseActiveUrlWithoutCombiner() {\n    const url = window.location.hash.slice(1).toLowerCase();\n    return this._urlSplitter(url);\n  },\n\n  _urlSplitter(url) {\n    const urlsSplits = url.split('/');\n    return {\n      resource: urlsSplits[1] || null,\n      id: urlsSplits[2] || null,\n      verb: urlsSplits[3] || null,\n    };\n  },\n\n  _urlCombiner(splitedUrl) {\n    return (splitedUrl.resource ? `/${splitedUrl.resource}` : '/') +\n      (splitedUrl.id ? '/:id' : '') +\n      (splitedUrl.verb ? `/${splitedUrl.verb}` : '');\n  },\n};\n\nexport default UrlParser;\n\n","const DrawerInitiator = {\n  init({button, drawer, content, hero}) {\n    this._item = true;\n\n    button.addEventListener('click', (event) => {\n      this._toggleDrawer(event, drawer);\n    });\n\n    button.addEventListener('keypress', (event) => {\n      this._togglekeyDrawer(event, drawer);\n    });\n\n    hero.addEventListener('click', (event) => {\n      this._closeDrawer(event, drawer);\n    });\n\n    content.addEventListener('click', (event) => {\n      this._closeDrawer(event, drawer);\n    });\n  },\n\n  _toggleDrawer(event, drawer) {\n    event.stopPropagation();\n    drawer.classList.toggle('move-nav');\n    this._navTransit();\n  },\n\n  _closeDrawer(event, drawer) {\n    event.stopPropagation();\n    drawer.classList.remove('move-nav');\n    this._navTransit();\n  },\n\n  _navTransit() {\n    const draw = document.querySelector('nav').classList.contains('move-nav');\n    const navigation = document.querySelectorAll('nav a');\n    const mediaQuery = window.matchMedia('(max-width: 599px)');\n\n    if (mediaQuery.matches) {\n      if (draw) {\n        navigation.forEach((navigate) => {\n          navigate.setAttribute('tabindex', '0');\n        });\n      } else if (!draw) {\n        navigation.forEach((navigate) => {\n          navigate.setAttribute('tabindex', '-1');\n        });\n      }\n    }\n  },\n\n  _togglekeyDrawer(event, drawer) {\n    event.stopPropagation();\n    if (event.key === 'Enter') {\n      event.preventDefault();\n      drawer.classList.toggle('move-nav');\n      this._navTransit();\n    }\n  },\n\n  toggle(item) {\n    item === true ? item = false : item = true;\n    return item;\n  },\n};\n\nexport default DrawerInitiator;\n\n","import {createLikeRestoButtonTemplate, createUnlikeRestoButtonTemplate}\n  from '../views/template/like-template';\n\nconst LikeButtonInitiator = {\n  async init({likeButtonContainer, favoriteRestaurant, restaurant}) {\n    this._likeButtonContainer = likeButtonContainer;\n    this._restaurant = restaurant;\n    this._favoriteRestaurant = favoriteRestaurant;\n    await this._renderButton();\n  },\n\n  async _renderButton() {\n    const {id} = this._restaurant;\n\n    if (await this._isRestaurantExist(id)) {\n      this._renderLiked();\n    } else {\n      this._renderLike();\n    }\n  },\n\n  async _isRestaurantExist(id) {\n    const restaurant = await this._favoriteRestaurant.getRestaurant(id);\n    return !!restaurant;\n  },\n\n  _renderLike() {\n    this._likeButtonContainer.innerHTML = createLikeRestoButtonTemplate();\n\n    const likeButton = document.querySelector('#likeButton');\n    likeButton.addEventListener('click', async () => {\n      await this._favoriteRestaurant.putRestaurant(this._restaurant);\n      this._renderButton();\n    });\n  },\n\n  _renderLiked() {\n    this._likeButtonContainer.innerHTML = createUnlikeRestoButtonTemplate();\n\n    const likeButton = document.querySelector('#likeButton');\n    likeButton.addEventListener('click', async () => {\n      await this._favoriteRestaurant.deleteRestaurant(this._restaurant.id);\n      this._renderButton();\n    });\n  },\n};\n\nexport default LikeButtonInitiator;\n","import RestaurantApiSource from '../data/restaurantapi-source';\n\nconst ReviewPostInitiator = {\n  async init({submitForm, id}) {\n    this._submitForm = submitForm;\n    this._id = id;\n    this._sendPost();\n  },\n\n  _sendPost() {\n    this._submitForm.addEventListener('submit', async (event) => {\n      event.preventDefault();\n      const nameReview = document.getElementById('reviewName').value;\n      document.getElementById('reviewName').value = '';\n      const stringReview = document.getElementById('reviewString').value;\n      document.getElementById('reviewString').value = '';\n      console.log('Sending post to restaurant api');\n      await RestaurantApiSource\n          .sendReview(this._id, nameReview, stringReview );\n      event.preventDefault();\n    });\n  },\n};\n\nexport default ReviewPostInitiator;\n","import * as WorkboxWindow from 'workbox-window';\n\nconst swRegister = async () => {\n  if (!('serviceWorker' in navigator)) {\n    console.log('Service Worker not supported in the browser');\n    return;\n  }\n\n  const wb = new WorkboxWindow.Workbox('./sw.bundle.js');\n\n  try {\n    await wb.register();\n    console.log('Service worker registered');\n  } catch (error) {\n    console.log('Failed to register service worker', error);\n  }\n};\n\nexport default swRegister;\n"],"names":["RestaurantNow","RestaurantDetail","RestaurantFavorite","parseActiveUrlWithCombiner","url","window","location","hash","slice","toLowerCase","splitedUrl","this","_urlSplitter","_urlCombiner","parseActiveUrlWithoutCombiner","urlsSplits","split","resource","id","verb","init","button","drawer","content","hero","_item","addEventListener","event","_toggleDrawer","_togglekeyDrawer","_closeDrawer","stopPropagation","classList","toggle","_navTransit","remove","draw","document","querySelector","contains","navigation","querySelectorAll","matchMedia","matches","forEach","navigate","setAttribute","key","preventDefault","item","likeButtonContainer","favoriteRestaurant","restaurant","_likeButtonContainer","_restaurant","_favoriteRestaurant","_renderButton","_isRestaurantExist","_renderLiked","_renderLike","getRestaurant","innerHTML","createLikeRestoButtonTemplate","putRestaurant","createUnlikeRestoButtonTemplate","deleteRestaurant","submitForm","_submitForm","_id","_sendPost","nameReview","getElementById","value","stringReview","console","log","RestaurantApiSource","navigator","wb","WorkboxWindow","register"],"sourceRoot":""}